create table person
(
    id             int generated by default as identity primary key,
    name           varchar(100) not null,
    age            int check ( age > 9 ),
    email          varchar(100) not null,
    phone_number   varchar(100),
    password       varchar(500) not null,
    role           varchar,
    created_at     timestamp,
    removed_at     timestamp,
    created_person int references Person (id),
    removed_person int references Person (id)
);

drop table person;

create table book
(
    id                 int generated by default as identity primary key,
    name               varchar(100) not null,
    year_of_production int check ( year_of_production > 0 ),
    author             varchar(100),
    annotation         varchar,
    owner              int          references person (id) on delete set null,
    created_at         timestamp,
    removed_at         timestamp,
    update_at          timestamp,
    created_person     int references Person (id),
    removed_person     int references Person (id),
    update_person      int references Person (id)
);
